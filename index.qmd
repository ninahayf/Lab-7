---
title: "Altitudinal Climate Change Across the US"
authors:
  - name: Nina Hayford & Sierra Mattiar
    affiliation: The University
    roles: writing
    corresponding: true
bibliography: references.bib
---

## Introduction

In this project, we are addressing how the temperature has changed in the US over the last couple of decades in relation to different altitudes. This is an important topic to cover because in the realm of climate change, higher altitude regions tend to respond to climate change in complex ways [@Penn_LPS_Online_2024a]. Being able to track these interesting changes will provide us with data to help people understand why these regions respond in certain ways. The data we have will also help us understand the highly impacted areas that might be suffering from the impacts of climate change more than other areas. Another reason why this topic is important to study is the fact that higher altitude areas are more sensitive to climate shifts [@ITT_User_2023a]. With the climate shifting rapidly, there is much research to be done to see how sensitive these areas are and in what aspect. We will also be including Urban Heat Island effects in Denver and New Orleans. The UHI effect is important to include because at lower elevations, its probably more humid and has lots of concrete, which makes the summers much hotter. So, the urban heat island effect might have New Orleans warming faster than Denver. Lastly, high altitudes contribute to climate variability and play a role in atmospheric circulation patterns [@ITT_User_2023a] so there could be much more effected by the altitudes than just the climate.

## Data Exploration

The data for this project was obtained from the NOAA website. The data includes:

-   **cold_days.csv**: Number of days with minimum temperature ≤ 32°F

-   **hot_days.csv**: Number of days with maximum temperature ≥ 90°F

-   **highest_temp.csv**: Highest recorded temperature per month

-   **lowest.temp.csv**: Lowest recorded temperature per month

-   **humidity.csv**: Annual relative humidity by location

-   **nrmavg.csv, nrmmax.csv, and nrmmin.csv**: Normal average, maximum, and minimum daily temperatures 

-   **elevation.csv**: elevation data with the peaks and dips of the major US cities

-   **UHI.csv**: Urban heat island effect in 2023 for each city in the US

Each dataset includes location information (e.g., city or station), date/year, and the measurement of interest. We will use this data to compare the data from Denver CO, one of the highest elevation cities, to New Orleans LA, one of the lowest elevation cities, to see if there is a difference in climate change between a high elevation city and a low elevation city. 

We focused on data components that show temperature change, urban heat island effect, and altitudes to see if Denver is more impacted by climate change than New Orleans.

Specifically, we:

- Compared Denver's elevation to New Orleans elevation. 
- Compared the amount of days above 90°F and below ≤32°F in Denver vs New Orleans. 
- Investigated elevation bins to compare temperature trends. 
- Looked at changes in humidity levels at varying altitudes. 
- Compared Urban Heat Island effects to see if one city is more impacted by it over the other. 

### Statistical Tests 
- **Linear Regression**: Modeled changes in temperature-related metrics over time, using elevation as a predictor
- **ANOVA**: Tested for significant differences in climate changes across different elevation bins
- **Bar Graph**

### Data cleaning 
- Standardized temperature units (°F across all data)
- Removed rows with missing values or null values
- Merged data by station ID
- Create elevation bins (<1000 ft, 1000-3000 ft, >3000 ft)
- Made sure all column names are the same 

### Data Visualization 
#### Visualization 1
```{r}
library(tidyverse)
library(readr)
library(lubridate)

# Read the data
hot_days <- read_csv("data/hot_days.csv", show_col_types = FALSE)
elevation <- read_csv("data/elevation.csv", show_col_types = FALSE)

# Create Elevation column
elevation <- elevation %>%
  mutate(Elevation = as.numeric(`High Feet`)) %>%
  select(City, State, Elevation)

# Merge elevation data with hot_days
hot_days <- left_join(hot_days, elevation, by = c("City", "State"))

# Now create elevation bins
hot_days <- hot_days %>%
  mutate(elevation_bin = case_when(
    Elevation < 1000 ~ "Low (<1000ft)",
    Elevation >= 1000 & Elevation < 3000 ~ "Mid (1000–3000ft)",
    Elevation >= 3000 ~ "High (>3000ft)"
  ))

```

```{r}
# Add a Year column (based on End_Date or Start_Date if needed)
hot_days <- hot_days %>%
  mutate(Year = as.numeric(substr(as.character(Start_Date), 1, 4)))

# Plot trend over time by elevation bin
hot_days %>%
  filter(!is.na(elevation_bin)) %>%
  ggplot(aes(x = Year, y = ANN, color = elevation_bin)) +
  stat_summary(fun = mean, geom = "line", linewidth = 1.2) +
  labs(title = "Average Number of Days ≥ 90°F (2000–2020)",
       x = "Year",
       y = "Days ≥ 90°F",
       color = "Elevation Bin") +
  theme_minimal()
```

#### Visualization 2
```{r}
library(stringr)
library(dplyr)
# Load and clean data
cool_days <- read_csv("data/cold_days.csv", show_col_types = FALSE)

elevation <- read_csv("data/elevation.csv", show_col_types = FALSE)

# Create an elevation column 
elevation <- elevation %>%
  mutate(Elevation = as.numeric(`High Feet`)) %>%
  select(City, State, Elevation)

# Merge elevation data with hot_days
cool_days <- left_join(cool_days, elevation, by = c("City", "State"))

# Now create elevation bins
cool_days <- cool_days %>%
  mutate(elevation_bin = case_when(
    Elevation < 1000 ~ "Low (<1000ft)",
    Elevation >= 1000 & Elevation < 3000 ~ "Mid (1000–3000ft)",
    Elevation >= 3000 ~ "High (>3000ft)"
  ))

# Create a proper Year column (if it uses the YYYYMM format)
cool_days <- cool_days %>%
  mutate(Year = as.integer(substr(Start_Date, 1, 4)))

# Filter data to include only years 2000 to 2020
cool_days_filtered <- cool_days %>%
  dplyr::filter(Year >= 2000 & Year <= 2020)



# Plot the trend over time by elevation bin
cool_days %>%
  filter(!is.na(elevation_bin)) %>%
  ggplot(aes(x = Year, y = ANN, color = elevation_bin)) +
  stat_summary(fun = mean, geom = "line", linewidth = 1.2) +
  labs(title = "Average Number of Days ≤ 32°F (2000–2020)",
       x = "Year",
       y = "Days ≤ 32°F",
       color = "Elevation Bin") +
  theme_minimal()
```


## Methods Identification

Within RStudio, we can perform spatial analysis to show regional variations in temperature. We can do this by using mapping tools like ggplot2, sf, or terra. We will assess how temperature changes over time using line graphs or trend lines for each city, then compare them to each other. We could include more supplemental data like normal temperatures to compare what the temperatures usually look like versus what they are now. We could also include things like humidity because humidity changes a lot in different elevations so it might be something important to keep track of. Some potential challenges we might see in the data is missing values or unavailable pieces of data. It also might have regional variation where not all areas have elevation data so we will not be able to use it. Some potential challenges we see in the methods include the complexity to compare data over two decades. So it is very important to focus on organizing and cleaning the data. It also may be hard to strictly distinguish between correlation and causation. Lastly, the selected methods will help us get to our final goal because these methods help us perform spatial and temporal analysis to visualize the data and support our claim. We can also compare our findings to try and find a possible cause or a strong influence for temperature changes.






